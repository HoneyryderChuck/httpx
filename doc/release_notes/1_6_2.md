# 1.6.2

## Bugfixes

* revert of behaviour introduced in 1.6.1 around handling of `:ip_families` for name resolution.
  * when no option is passed, do not assume no IPv6 connectivity if no available non-local IP is found, as the local network may still be reachable under `[::]`.
* bail out connection if the tcp connection was established but the ssl session failed.
  * when alpn negotiation succeeded, this could still initialize the HTTP/2 connection and put bytes in the buffer, which would cause a busy loop trying to write to a non-open socket.
* datadog: fix initialization of spans in non-connection related errors
  * past code was relying on the error being around DNS, but other errors could pop; the fix was moving the init time setup early to the session, when a request is first passed ot the associated connection.
  * it can also fail earlier, so provide a workaround for that as well.